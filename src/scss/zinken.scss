@import 'sanitize';
@import 'variables';
@import 'mixins';
@import 'atoms';

body {
  counter-reset: h2 h3 h4 h5 code table fig page;
}

h2 {
  counter-increment: h2;

  &:before {
    // TODO: 間隔など調整の必要あり
    content: counter(h2);
    margin-right: 1em;
  }
}

h3 {
  counter-increment: h3;

  &:before {
    // TODO: 間隔など調整の必要あり
    content: counter(h2) "." counter(h3);
    margin-right: 1em;
  }
}

h4 {
  counter-increment: h4;

  &:before {
    // TODO: 間隔など調整の必要あり
    content: counter(h2) "." counter(h3) "." counter(h4);
    margin-right: 1em;
  }
}

h5 {
  counter-increment: h5;

  &:before {
    // TODO: 間隔など調整の必要あり
    content: counter(h2) "." counter(h3) "." counter(h4) "." counter(h5);
    margin-right: 1em;
  }
}

caption,
figcaption {
  line-height: 3;
  text-align: center;
}

figcaption.code {
  counter-increment: code;

  &:before {
    content: "ソースコード " counter(code) " :";
    margin-right: 0.3em;
  }
}

caption.table {
  counter-increment: table;

  &:before {
    content: "表 " counter(table) " :";
    margin-right: 0.3em;
  }
}

figcaption.fig {
  counter-increment: fig;

  &:before {
    content: "図 " counter(fig) " :";
    margin-right: 0.3em;
  }
}

.page {
  width: 210mm;
  min-height: 296mm;
  box-shadow: 5px 5px 20px $light-gray;
  margin: 50px auto;
  padding: 80px 50px;
  page-break-after: always;
  position: relative;

  &:after {
    position: absolute;
    bottom: 20px;
    right: 50%;
    text-indent: 0.5em;
    counter-increment: page;
    content: counter(page);
  }

  // TODO: ページ番号をどうにか
  @media print {
    box-shadow: none;
  }
}

.cover {
  display: flex;
  justify-content: center;
  align-items: center;

  &:after {
    content: '';
    counter-reset: page;
  }

  * { text-align: center; }
}

@page {
  size: A4;
  margin: 80px 50px;
}
